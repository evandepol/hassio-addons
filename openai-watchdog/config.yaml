name: "OpenAI Watchdog"
description: "Intelligent Home Assistant monitoring with continuous OpenAI analysis"
version: "1.0.15"
slug: "openai_watchdog"
init: false

# Supported architectures
arch:
  - aarch64
  - amd64

# External resources
url: "https://github.com/evandepol/hassio-addons"

# No web interface - runs as background service
ingress: true
ingress_port: 8099
panel_icon: mdi:shield-search
panel_title: "OpenAI Watchdog"
panel_admin: true

# Service startup configuration
boot: auto
startup: services

# Add-on configuration options
options:
  openai_api_key: ""
  openai_base_url: ""
  openai_model: "gpt-4o-mini"
  check_interval: 30
  insight_threshold: 0.8
  max_daily_api_calls: 1000
  monitoring_scope:
    - "all"
  notification_service: "persistent_notification"
  enable_learning: true
  cost_limit_daily: 1.00
  log_api_payloads_to_stdout: false
  notify_on_any_insight: false
  send_test_notification_on_start: true

schema:
  openai_api_key: "password"
  openai_base_url: "str?"
  openai_model: "list(gpt-4o-mini|gpt-4o|gpt-3.5-turbo)?"
  check_interval: "int(10,300)?"
  insight_threshold: "float(0.5,1.0)?"
  max_daily_api_calls: "int(100,5000)?"
  monitoring_scope: "list(all|climate|security|energy|automation_performance|device_health|patterns)?"
  notification_service: "str?"
  enable_learning: "bool?"
  cost_limit_daily: "float(0.10,10.00)?"
  log_api_payloads_to_stdout: "bool?"
  notify_on_any_insight: "bool?"
  send_test_notification_on_start: "bool?"

# Volume mapping for persistent storage
map:
  - config:rw    # OpenAI configuration and monitoring data

# Require Home Assistant API access
homeassistant_api: true
hassio_api: true